<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Our small contribution to Paradigm’s Reth to diversify Ethereum clients - LambdaClass Blog</title>
    <meta name="description" content="Deep technical insights on cryptography, distributed systems, zero-knowledge proofs, and cutting-edge software engineering from the LambdaClass team.">

    <!-- Feeds -->
    <link rel="alternate" type="application/rss+xml" title="RSS" href="https://blog.lambdaclass.com/rss.xml">
    <link rel="alternate" type="application/atom+xml" title="Atom" href="https://blog.lambdaclass.com/atom.xml">

    <!-- Styles -->
    <link rel="stylesheet" href="https://blog.lambdaclass.com/style.css">

    <!-- Preload fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">

    <!-- Math rendering -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js" onload="renderMathInElement(document.body, {delimiters: [{left: '$$', right: '$$', display: true}, {left: '$', right: '$', display: false}]});"></script>
</head>
<body>
    <div class="site-wrapper">
        <header class="site-header">
            <nav class="nav-container">
                <a href="https://blog.lambdaclass.com" class="site-logo">
                    <span class="logo-text">LambdaClass</span>
                </a>
                <div class="nav-links">
                    <a href="https://blog.lambdaclass.com" >Home</a>
                    <a href="https://blog.lambdaclass.com/tags" >Topics</a>
                    <a href="https://github.com/lambdaclass" target="_blank" rel="noopener">GitHub</a>
                    <a href="https://x.com/class_lambda" target="_blank" rel="noopener">X</a>
                    <button class="theme-toggle" id="theme-toggle" aria-label="Toggle theme">
                        <svg class="sun-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg>
                        <svg class="moon-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>
                    </button>
                </div>
            </nav>
        </header>

        <main class="site-main">
            
<article class="page-article">
    <header class="page-header">
        <h1 class="page-title">Our small contribution to Paradigm’s Reth to diversify Ethereum clients</h1>
        
        <div class="page-meta">
            <time datetime="2023-03-06">March 06, 2023</time>
        </div>
        
    </header>

    <div class="page-content prose">
        <p>In December, last year, we heard about <a rel="noopener external" target="_blank" href="https://github.com/paradigmxyz/reth">Reth</a>, and it immediately piqued our interest. A greenfield new implementation of an Ethereum full node? Where do we sign up!?</p>
<p>The project, started and driven by <a rel="noopener external" target="_blank" href="https://www.twitter.com/gakonst">@gakonst</a> from Paradigm (if you haven’t heard about it yet, we encourage you to read gakonst’s <a rel="noopener external" target="_blank" href="https://www.paradigm.xyz/2022/12/reth">introductory post</a> ), aims to not just experiment improvements to performance, safety, software reuse through modularity, and node architecture, but also to contribute to Ethereum’s stability by improving implementation diversity.</p>
<p>These goals strongly resonated with our values and interests, the intersection of deep technical problems, good engineering, and building in the open and jointly. “Diversity” is not just a buzzword: time and time again we’ve seen how monocultures stagnate, how team composition and output benefits from integrating differing viewpoints and experiences, how the state of the art advances by integrating engineering and research, and how software projects grow stronger, instead of weaker, by having several implementations of the same thing. It’s not <em>just</em> “more eyeballs”, or “competition breeds excellence”. It’s an emergent property.</p>
<p>All this made us commit to contributing, but when we started we had to first go out on a learning path: the evolution and design tradeoffs of blockchain node architectures and protocols, the nitty gritty of implementing data structures and patterns used in crypto projects, and so on. For ourselves, we expected to just learn and hone our skills in this process of giving back, but were very satisfied to see other benefits: other projects we were working on required something we learned working on reth, or viceversa. Our seniors had interesting problems to work on, and our juniors had excellent guidance in their maturation process.</p>
<p>Among the many fascinating things one learns when working on cryptocurrency infrastructure project internals is just how to structure such a beast. Blockchain nodes are a kind of distributed database, so they need to handle incoming requests, both to read from the node storage and to write to the transaction mempool, handle connections to peers and the protocol used to communicate with them, and manage the actual storage of the data and cryptographic data structures used to provide the features and guarantees blockchains are known for.</p>
<p>As mentioned elsewhere, Reth takes some cues from Akula and Erigon, which propose a different <a rel="noopener external" target="_blank" href="https://github.com/ledgerwatch/erigon-book/blob/main/architecture.md">architecture</a> than Geth, again, more modular and built up out of commmunicating components which can be separated out into other processes or projects as needed. A key component is the <a rel="noopener external" target="_blank" href="https://github.com/ledgerwatch/erigon/blob/devel/eth/stagedsync/README.md">staged</a> <a rel="noopener external" target="_blank" href="https://erigon.substack.com/p/erigon-stage-sync-and-control-flows">sync</a>, a version of Go-Ethereum’s Full Sync designed with performance in mind.</p>
<p>This staged sync is in essence a state machine consisting of series of stages, each one of which is a segmented part of the syncing process of the node. Each stage takes care of one well-defined task, such as downloading headers or executing transactions, persist their results to a database, and roll forwards and backwards according to required changes. Each stage is thus executed once, unless an interruption or a network reorg/unwind requires restarting or rolling back.</p>
<p>In Reth, the staged sync pipeline executes queued stages serially. An external component determines the tip of the chain and the pipeline then executes each stage in order from the current local chain tip and the external chain tip. When a stage is executed, it will run until it reaches the chain tip.</p>
<p>The <a rel="noopener external" target="_blank" href="https://github.com/paradigmxyz/reth/blob/main/crates/stages/src/pipeline/mod.rs#L28">reth docs</a> for the pipeline have an excellent diagram detailing how the stages work.</p>
<p><img src="/images/external/yMGxizE.png" alt="" /></p>
<p>Of course, nothing is written in stone, and may change as possible improvements are detected and implemented, and as the project takes on it’s own direction.</p>
<p>What is relevant here is how things one takes for granted need in other contexts to be re-thought and implemented, such as maintaining data consistency, being able to provide efficient rollbacks and cryptographic hash state computations, etc.</p>
<p>But at the end of the day, code rules. Here are some of the more interesting PRs we were able to contribute:</p>
<pre class="giallo" style="color: #E1E4E8; background-color: #24292E;"><code data-lang="plain"><span class="giallo-l"><span>    * [Adding a stage to the sync pipeline for calculating the chain’s state root in an incremental fashion](https://github.com/paradigmxyz/reth/pull/994)</span></span>
<span class="giallo-l"><span>    * [Adaptable request timeouts](https://github.com/paradigmxyz/reth/pull/789)</span></span>
<span class="giallo-l"><span>    * [Prioritizing requesting peers with low latency](https://github.com/paradigmxyz/reth/pull/835)</span></span>
<span class="giallo-l"><span>    * [Adding support for prometheus metrics](https://github.com/paradigmxyz/reth/pull/474) to the [headers sync stage](https://github.com/paradigmxyz/reth/pull/498) and [txpool](https://github.com/paradigmxyz/reth/pull/584).</span></span></code></pre>
<p>As well as general tests and documentation.</p>
<p>We are thankful to Paradigm for spearheading and allowing us to collaborate with them and the community. Managing a project takes time and effort.</p>
<p>EOF.</p>

    </div>
</article>

        </main>

        <footer class="site-footer">
            <div class="footer-container">
                <div class="footer-content">
                    <p class="footer-copyright">&copy; 2026 LambdaClass. All rights reserved.</p>
                    <div class="footer-links">
                        <a href="https://github.com/lambdaclass" target="_blank" rel="noopener">GitHub</a>
                        <a href="https://x.com/class_lambda" target="_blank" rel="noopener">X</a>
                        <a href="https://blog.lambdaclass.com/rss.xml">RSS</a>
                    </div>
                </div>
            </div>
        </footer>
    </div>

    <script>
        // Theme toggle functionality
        const themeToggle = document.getElementById('theme-toggle');
        const html = document.documentElement;

        // Check for saved preference or system preference
        const savedTheme = localStorage.getItem('theme');
        const systemPrefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;

        if (savedTheme) {
            html.setAttribute('data-theme', savedTheme);
        } else if (systemPrefersDark) {
            html.setAttribute('data-theme', 'dark');
        }

        themeToggle.addEventListener('click', () => {
            const currentTheme = html.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            html.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
        });
    </script>
</body>
</html>
